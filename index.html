<!DOCTYPE html>
<html lang="es" ng-app="bookApp">
<head>
  <meta charset="UTF-8">
  <title>SHOPBOUTIQUE</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="stylesheet" href="css/estilos.css">
</head>
<body ng-controller="TiendaController">

  <!-- Header  -->
  <header class="bg-dark p-3 d-flex justify-content-between align-items-center shadow">
    <h3 class="m-0 text-gold">SHOPBOUTIQUE</h3>
    <div class="d-flex align-items-center">
      <span class="text-white mr-3">Total: {{totalCarrito | currency}}</span>
      <button class="btn btn-outline-warning btn-sm" ng-click="mostrarModalCarrito = true">
        ðŸ›’ Ver Carrito
      </button>
    </div>
  </header>

  <!-- Carrusel -->
  <div id="bannerCarousel" class="carousel slide" data-ride="carousel">
    <div class="carousel-inner">
      <div class="carousel-item active">
        <img src="img/banner.png" class="d-block w-100" alt="Lectura 1">
      </div>
      <div class="carousel-item">
        <img src="img/banner1.jpg" class="d-block w-100" alt="Lectura 2">
      </div>
      <div class="carousel-item">
        <img src="img/banner2.jpg" class="d-block w-100" alt="Lectura 3">
      </div>
    </div>
    <a class="carousel-control-prev" href="#bannerCarousel" role="button" data-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="sr-only">Anterior</span>
    </a>
    <a class="carousel-control-next" href="#bannerCarousel" role="button" data-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="sr-only">Siguiente</span>
    </a>
  </div>

  <!-- Filtros -->
  <section class="container mt-4">
    <h5 class="text-white">Productos de la categorÃ­a: <strong class="text-gold">{{categoriaSeleccionada || 'Todas'}}</strong></h5>
    <div class="d-flex mb-3">
      <input type="text" ng-model="filtroNombre" class="form-control mr-2" placeholder="ðŸ” Buscar por nombre">
      <select ng-model="categoriaSeleccionada" ng-options="cat for cat in categorias" class="form-control">
        <option value="">Todas las categorÃ­as</option>
      </select>
    </div>

    <!-- Cards -->
    <div class="row">
      <div class="col-md-4 mb-4" ng-repeat="producto in productos | filter:{categoria: categoriaSeleccionada} | filter: filtroNombre">
        <div class="card h-100 shadow-sm">
          <img src="{{producto.imagen}}" class="card-img-top" alt="{{producto.nombre}}">
          <div class="card-body d-flex flex-column">
            <h5 class="card-title">{{producto.nombre}} <span class="float-right text-gold">{{producto.precio | currency}}</span></h5>
            <p class="card-text">{{producto.descripcion}}</p>
            <button class="btn btn-dark mt-auto" ng-click="verDetalles(producto)">VER DETALLES</button>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Modal Detalles -->
  <div class="modal fade show" style="display:block;" ng-show="mostrarModalDetalles">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">{{productoSeleccionado.nombre}}</h5>
          <button type="button" class="close" aria-label="Close" ng-click="cerrarModal()">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <img src="{{productoSeleccionado.imagen}}" class="img-fluid mb-3">
          <p>{{productoSeleccionado.descripcion}}</p>
          <h5 class="text-right text-gold">{{productoSeleccionado.precio | currency}}</h5>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" ng-click="cerrarModal()">Cancelar</button>
          <button class="btn btn-warning" ng-click="agregarAlCarrito(productoSeleccionado)">Agregar al Carrito ðŸ›’</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal Carrito -->
  <div class="modal fade show" style="display:block;" ng-show="mostrarModalCarrito">
    <div class="modal-dialog modal-lg">
      <div class="modal-content p-3">
        <div class="modal-header">
          <h4 class="modal-title">Carrito de Compra</h4>
          <button type="button" class="close" ng-click="cerrarCarrito()">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <table class="table table-bordered">
          <thead>
            <tr>
              <th>Producto</th>
              <th>Precio</th>
              <th>Cantidad</th>
              <th>Sub Total</th>
              <th>AcciÃ³n</th>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="item in carrito">
              <td>{{item.nombre}}</td>
              <td>{{item.precio | currency}}</td>
              <td>{{item.cantidad}}</td>
              <td class="text-gold">{{item.precio * item.cantidad | currency}}</td>
              <td>
                <button class="btn btn-sm btn-outline-danger" ng-click="eliminarDelCarrito(item)">ðŸ—‘ Eliminar</button>
              </td>
            </tr>
          </tbody>
        </table>
        <div class="text-right font-weight-bold h5 text-gold">Total: {{totalCarrito | currency}}</div>
        <div class="mt-3 d-flex justify-content-between">
          <button class="btn btn-outline-dark" ng-click="cerrarCarrito()">Seguir Comprando</button>
          <button class="btn btn-success" ng-click="pagar()">Proceder al Pago</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Seccipn de Contacto  -->
  <section class="contacto bg-dark text-white p-5 mt-5">
    <div class="container">
      <h3 class="text-center text-gold mb-4">ContÃ¡ctanos</h3>
      <p class="text-center mb-4">Estamos aquÃ­ para atenderte. EnvÃ­anos tu consulta.</p>
      <form novalidate name="contactForm">
        <div class="row">
          <div class="col-md-6">
            <label>Nombre</label>
            <input type="text" ng-model="contacto.nombre" name="nombre" required class="form-control">
            <small class="text-warning" ng-show="contactForm.nombre.$touched && contactForm.nombre.$invalid">Nombre requerido</small>
          </div>
          <div class="col-md-6">
            <label>Email</label>
            <input type="email" ng-model="contacto.email" name="email" required class="form-control">
            <small class="text-warning" ng-show="contactForm.email.$touched && contactForm.email.$invalid">Email vÃ¡lido requerido</small>
          </div>
        </div>
        <div class="mt-3">
          <label>Mensaje</label>
          <textarea ng-model="contacto.mensaje" name="mensaje" required class="form-control" rows="4"></textarea>
          <small class="text-warning" ng-show="contactForm.mensaje.$touched && contactForm.mensaje.$invalid">Mensaje requerido</small>
        </div>
        <button class="btn btn-warning mt-3" ng-disabled="contactForm.$invalid" ng-click="enviarMensaje()">Enviar Mensaje</button>
      </form>
    </div>
  </section>

  <!-- Footer -->
  <footer class="bg-darker text-white py-4">
    <div class="container text-center">
      <p class="mb-0">&copy; 2025 SHOPBOUTIQUE. Todos los derechos reservados.</p>
      <p class="text-muted small mt-1">Tu tienda de confianza para productos exclusivos</p>
    </div>
  </footer>

  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular.min.js"></script>
  <script src="js/app.js"></script>
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>